<!DOCTYPE html>
<html>
	<head>
		<title>Trie Visualizer</title>
		<script src="https://threejs.org/build/three.js"></script>
		<script src="https://threejs.org/examples/js/controls/OrbitControls.js"></script>
		<script src="https://threejs.org/examples/js/libs/dat.gui.min.js"></script>
		<script type="text/javascript" src="./Scripts/TrieNode.js"></script>
		<script type="text/javascript">
			function mainFunction()
			{
			let renderer = new THREE.WebGLRenderer({antialias: true});
			renderer.setSize(window.innerWidth, window.innerHeight);
			renderer.setPixelRatio(window.devicePixelRatio);

			renderer.setClearColor(0x000000, 1);
			document.body.appendChild(renderer.domElement);

			let scene = new THREE.Scene();

			let aspect = window.innerWidth / window.innerHeight;

			let camera = new THREE.PerspectiveCamera(70, aspect, 1, 1000);
			camera.position.y = 0;
			camera.position.z = 30;
			camera.position.x = 0;
			scene.add(camera);

			let root = new TrieNode(0, new THREE.Vector3(0, 15, 0), scene, 80, 0);
			root.insertWord("aardvark", scene);
			root.insertWord("alien", scene);
			root.insertWord("alanna", scene);

			function render()
			{
				renderer.render(scene, camera);
			}

			let cameraControls = new THREE.OrbitControls(camera, renderer.domElement);
			cameraControls.enableZoom = true;
			cameraControls.addEventListener("change", render, false);

			render();

			let inputText = {
				newWord : "enter word",
				addWord : false,
				deletedWord : "enter word",
				deleteWord : false
			}

			let gui = new dat.GUI();
			gui.add(inputText, "newWord");
			gui.add(inputText, "addWord").onChange(function(newValue){
				inputText.addWord = false;
				root.insertWord(inputText.newWord, scene);
				render();
			});

			gui.add(inputText, "deletedWord");
			gui.add(inputText, "deleteWord").onChange(function(newValue){
				console.log("deleting " + inputText.deletedWord + "...");
				inputText.deleteWord = false;
				root.deleteWord(inputText.deletedWord, scene);
				render();
			});

			function resize()
			{
				renderer.setSize(window.innerWidth - 20, window.innerHeight - 20);
				camera.aspect = (window.innerWidth - 20) / (window.innerHeight - 20);
				camera.updateProjectionMatrix();

				render();
			}

			window.addEventListener("resize", resize, false);
		}
	</script>
	</head>
	<body onload="mainFunction();">
	</body>
</html>
